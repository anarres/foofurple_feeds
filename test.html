<html>

<script>

alert('foo');

var feeds_config = [

{ 'stream_name':'Blogs, in general',
'feeds':
[{'name':'Captain awkward','url':'http://www.captainawkward.com/feed'}, 
    {'name':'BoingBoing','url':'http://boingboing.net/feed'}] },


{ 'stream_name':'Blogs, less frequently updated',
'feeds':
[{'name':'Hoyden About Town','url':'http://hoydenabouttown.com/feed/'}, 
    {'name':'Feminist Action Cambridge','url':'http://www.feministactioncambridge.wordpress.com/feed'}] },


{ 'stream_name':'Data, programming',
'feeds':
[{'name':'Whimsley','url':'http://whimsley.typepad.com/whimsley/atom.xml'}, 
    {'name':'Social Media Collective','url':'http://socialmediacollective.org/feed/'},
    {'name': 'Bad Science', 'url':'http://www.badscience.net/feed/'},
    {'name': 'Buddycloud blog', 'url':'http://blog.buddycloud.com/rss'},
    {'name': 'Dreamwidth news', 'url':'http://dw-news.dreamwidth.org/data/atom'},
    {'name': 'Dreamwidth dev', 'url':'http://dw-dev.dreamwidth.org/data/atom'},
    {'name': 'bengoldacre secondary blog', 'url':'http://bengoldacre.posterous.com/rss.xml'}] },


{ 'stream_name':'Auf Deutsch',
'feeds':
 [{'name':'SWR Wissen','url':'http://www1.swr.de/podcast/xml/swr2/wissen.xml'},
    {'name':'Softmetz', 'url':'http://identi.ca/api/statuses/user_timeline/85379.atom'},
    {'name':'Sendung mit der Maus','url':'http://podcast.wdr.de/maus.xml'},
    {'name':'Quanks und co', 'url':'http://podcast.wdr.de/quarks.xml'},
    {'name':'DW.DW Journal Reporer','url':'http://rss.dw.de/xml/podcast_journal-reporter'}] }

];
alert(feeds_config);

function goBack(feeds_config) {

    var out = "feeds_config = [";

    for (var i=0; i<feeds_config.length; i++) {
        out += "{ 'stream_name':'";
        out += feeds_config[i]['stream_name'];
        out += "', 'feeds': [";
        for (var j=0; j<feeds_config[i]['feeds'].length; j++) {
            out += "{'name':'";
            out += feeds_config[i]['feeds'][j]['name'];
            out += "', 'url':'";
            out += feeds_config[i]['feeds'][j]['url'];
            if (j+1 < feeds_config[i]['feeds'].length) {
                out += "'},";
            }
            else {
                out += "'}";
            }
        }
        // May need to deal with last commas
        if (i+1 < feeds_config.length) {
            out += "] },";
        }
        else {
            out += "] }";
        }
    }
    out += "];";
    return out;
}
alert(goBack(feeds_config));


</script>


<h1>test test test</h1>
</html>
